<!doctype html><html lang=en><style>﻿html,body,div,form,fieldset,legend,label,h1{margin:0;padding:0}table{border-collapse:collapse;border-spacing:0}th,td{text-align:left;vertical-align:top}h1,h2,h3,h4,h5,h6,th,td,caption{font-weight:400}img{border:0;max-width:100%}h1{font-size:1.87em}h2{font-size:1.2em;margin-bottom:10px;margin-top:0}h3{margin-top:50px}body{background-color:#fff;color:rgba(0,0,0,.8);font-family:medium-content-serif-font,Georgia,Cambria,times new roman,Times,serif;-moz-font-feature-settings:"liga" on;font-feature-settings:"liga" on;font-size:1.25em;-moz-osx-font-smoothing:grayscale;font-style:normal;font-weight:400;letter-spacing:-.003em;line-height:1.58;text-rendering:optimizeLegibility}article{margin-top:44px}pre{-moz-font-feature-settings:"liga" off;font-feature-settings:"liga" off;font-size:.92em;-moz-osx-font-smoothing:auto;-webkit-font-smoothing:subpixel-antialiased;padding:20px;overflow:auto}::-moz-selection{background:#000;color:#fff}::selection{background:#000;color:#fff}body{margin-top:8%}header{font-size:.78em;margin:0 auto 2em;max-width:220px;text-align:center}a:link,a:visited,a:hover,a:active{color:#af403c;text-decoration:none}a:hover{text-decoration:underline}nav{text-align:center}nav ul{display:inline-block;text-align:initial;padding-left:0}nav li:not(:first-child):before{content:" · "}nav li{list-style:none;display:inline}.logo{background-size:cover;display:inline-block;height:150px;width:171px}.published-date{color:#888;font-size:.8em}blockquote{border-left:4px solid #ededee;font-style:italic;margin:4px 10px;padding:3px 20px}code{background-color:#f9f9fa;border:1px solid #ededee;border-radius:6px;display:inline-block;font-family:courier new,courier,monospace;-moz-font-feature-settings:"liga" off;font-feature-settings:"liga" off;font-size:16px;-moz-osx-font-smoothing:auto;-webkit-font-smoothing:subpixel-antialiased;max-width:100%;overflow-x:auto;padding:0 5px;vertical-align:middle;word-wrap:normal;box-shadow:0 1px 1px rgba(0,0,0,.125)}.button{background-color:#af403c;border-radius:10px;color:#fff;margin:40px auto;padding:10px;text-align:center}.button:hover{background-color:red}.talk{margin-top:80px}.video-container{position:relative;padding-bottom:56.25%;padding-top:30px;height:0;overflow:hidden;margin-bottom:40px}.video-container iframe,.video-container object,.video-container embed{position:absolute;top:0;left:0;width:100%;height:100%}figure{font-size:.9em;font-style:italic;margin:0 0 40px;padding:0;text-align:center;text-indent:0}figcaption{margin-top:10px}.loader{position:relative;overflow:hidden;width:auto}.loader object{position:absolute}.loader img,.loader object{display:block;top:0;left:0;width:100%}object{position:relative;float:left;display:block}object::after{position:absolute;top:0;left:0;display:block;width:1e3px;height:1e3px;content:"";background:#efefef}.frozen{-webkit-filter:blur(8px);-moz-filter:blur(8px);-o-filter:blur(8px);-ms-filter:blur(8px);filter:blur(8px);transform:scale(1.04);animation:.2s ease-in .4s 1 forwards fade;width:100%}@keyframes fade{0%{opacity:1}100%{opacity:0}}@media(max-width:520px){body{padding:0 20px}pre{font-size:.85em;padding:5px}h1{font-size:1.6em}}@media(min-width:520px){body{margin:10% auto 0;margin-top:120px;width:480px}h1{font-size:1.6em}}@media(min-width:1024px){body{width:850px}header{float:left;width:210px}main,footer{margin-left:260px;margin-bottom:40px}}footer{margin-bottom:40px}.links{list-style:none;display:inline}.field{padding:10px;font-size:.8em}.email{width:300px}.submit{border:0;padding:12px;background-color:#eee}</style><link rel=dns-prefetch href=//www.google-analytics.com/><link rel=apple-touch-icon sizes=180x180 href="/apple-touch-icon.png?v=m2llJQPQq8"><link rel=icon type=image/png sizes=32x32 href="/favicon-32x32.png?v=m2llJQPQq8"><link rel=icon type=image/png sizes=16x16 href="/favicon-16x16.png?v=m2llJQPQq8"><link rel=manifest href="data:application/manifest+json;base64,eyJzaG9ydF9uYW1lIjoiRW5kbGVyIiwiaWNvbnMiOlt7InNyYyI6Ii9hbmRyb2lkLWNocm9tZS0xOTJ4MTkyLnBuZz92PW0ybGxKUVBRcTgiLCJzaXplcyI6IjE5MngxOTIiLCJ0eXBlIjoiaW1hZ2UvcG5nIn0seyJzcmMiOiIvYW5kcm9pZC1jaHJvbWUtNTEyeDUxMi5wbmc/dj1tMmxsSlFQUXE4Iiwic2l6ZXMiOiI1MTJ4NTEyIiwidHlwZSI6ImltYWdlL3BuZyJ9XX0="><link rel=mask-icon href="/safari-pinned-tab.svg?v=m2llJQPQq8" color=#5bbad5><link rel="shortcut icon" href="/favicon.ico?v=m2llJQPQq8"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content=#ffffff><meta property=og:title content="Why Type Systems Matter"><meta property=og:type content=website><meta property=og:description content="I've written most of my code in dynamically ..."><meta property=og:url content=https://matthias-endler.de/2017/why-type-systems-matter><meta property=og:image content=https://matthias-endler.de/img/social/2017_why_type_systems_matter.png><meta name=twitter:title content="Why Type Systems Matter"><meta name=twitter:description content="I've written most of my code in dynamically ..."><meta name=twitter:card content=summary_large_image><meta name=twitter:site content=@matthiasendler><meta name=twitter:creator content=@matthiasendler><meta name=twitter:image content=https://matthias-endler.de/img/social/2017_why_type_systems_matter.png><title>Why Type Systems Matter | Matthias Endler</title><meta name=author content="Matthias Endler"><meta name=description content="Personal website of Matthias Endler, a Software Engineer interested in low-level programming and backend development. PHP, Python, Go, Rust."><header><a class=logo href=/><img alt=Home src=data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA3OTAuMjMgNjkyLjYxIj48Y2lyY2xlIGN4PSI0MTMuMjQiIGN5PSIyMjcuNyIgcj0iMjE5LjY4IiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMTYuMDMiIHN0eWxlPSJsaW5lLWhlaWdodDoxMjUlIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgbGV0dGVyLXNwYWNpbmc9IjAiIHdvcmQtc3BhY2luZz0iMCIvPjxnIGZpbGwtcnVsZT0iZXZlbm9kZCIgc3Ryb2tlPSIjYTE2MjAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgbGV0dGVyLXNwYWNpbmc9IjAiIHdvcmQtc3BhY2luZz0iMCI+PHBhdGggZmlsbD0iIzMzMWYwMCIgc3Ryb2tlLXdpZHRoPSIxLjk3IiBkPSJNNDgzLjc1IDI2NS43NGwtNjcuMDcgNDAuMTQtNzQuMjMtMzkuNTMgMTQxLjMtLjZ6IiBzdHlsZT0ibGluZS1oZWlnaHQ6MTI1JSIvPjxwYXRoIGZpbGw9IiNlZmJhMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTQ4Ni42NSAyNjUuOTJsLTcwLjIgMzQuMDItNzYuOS0zMy45IDE0Ny4xLS4xMnoiIHN0eWxlPSJsaW5lLWhlaWdodDoxMjUlIi8+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2OC42NCAyLjkxNCkgc2NhbGUoLjY1Nzk1KSIgc3R5bGU9ImxpbmUtaGVpZ2h0OjEyNSUiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBsZXR0ZXItc3BhY2luZz0iMCIgd29yZC1zcGFjaW5nPSIwIj48ZWxsaXBzZSBjeD0iLTYwOC43NSIgY3k9Ii0xNjMuMTQiIHRyYW5zZm9ybT0ibWF0cml4KDEuMjQ4OTcgLS4xMTM3IC4xMDcgMS4xNzUxNyAxMDk1Ljg3IDQ2Ni43KSIgcng9IjI1LjI1IiByeT0iMjgiLz48ZWxsaXBzZSBjeD0iMzMxLjM2IiBjeT0iMzQ3Ljk5IiBmaWxsPSIjZmZmIiB0cmFuc2Zvcm09Im1hdHJpeCguNTIyMTMgMCAwIC41NDc0NSAxNTguNzU3IDEzNi40MzIpIiByeD0iMTUuMTUiIHJ5PSIxNy4wNCIvPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNjguNjQgMi45MTQpIHNjYWxlKC42NTc5NSkiIHN0eWxlPSJsaW5lLWhlaWdodDoxMjUlIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgbGV0dGVyLXNwYWNpbmc9IjAiIHdvcmQtc3BhY2luZz0iMCI+PGVsbGlwc2UgY3g9Ii02MDguNzUiIGN5PSItMTYzLjE0IiB0cmFuc2Zvcm09Im1hdHJpeCgxLjI0ODk3IC0uMTEzNyAuMTA3IDEuMTc1MTcgMTIwMy4yIDQ2Ny42NDYpIiByeD0iMjUuMjUiIHJ5PSIyOCIvPjxlbGxpcHNlIGN4PSIzMzEuMzYiIGN5PSIzNDcuOTkiIGZpbGw9IiNmZmYiIHRyYW5zZm9ybT0ibWF0cml4KC41MjIxMyAwIDAgLjU0NzQ1IDI2NS4zNTggMTM2Ljk5MykiIHJ4PSIxNS4xNSIgcnk9IjE3LjA0Ii8+PC9nPjxnIGZpbGwtcnVsZT0iZXZlbm9kZCIgc3Ryb2tlPSIjMDAwIj48cGF0aCBkPSJNMzY2LjQgMTAwLjY0YzE4LjU0LTExLjA1IDM2LjU0LTIyLjU3IDQ2Ljk0LTQwLjczIDEuMzUgMTIuMy0uMSAyOC41LTEwLjg2IDQzLjUiLz48cGF0aCBkPSJNMzg5LjQ0IDEwMC42NGMxOC41NC0xMS4wNSAzNi41NC0yMi41NyA0Ni45NC00MC43MyAxLjM1IDEyLjMtLjEgMjguNS0xMC44NiA0My41Ii8+PHBhdGggZD0iTTQxMi40OCAxMDAuNjRDNDMxLjAyIDg5LjYgNDQ5IDc4LjA3IDQ1OS40MiA1OS45YzEuMzUgMTIuMy0uMSAyOC40NC0xMC44NiA0My40NiIvPjwvZz48cGF0aCBkPSJNNDA5LjI0IDg3LjA1Yy04MS44NS4yNy0xNTYuNDQgMTA0LjQzLTE4MC40OCAyMTYuNDZhMTk5LjYgMTk5LjYuMCAwIDAgNTEuODMgNzMuMWM3LjktMTU3LjkgNDQuNy0yNjYuOSAxMTIuNS0yMDcuOCAxMC4xIDguOSAxNS4yIDEyLjkgMjAuMSAxMi42IDQuOS4zIDEwLTMuOCAyMC4xLTEyLjYgNjcuNy01OS4xIDEwNC42IDUwIDExMi41IDIwNy44YTE5OS42IDE5OS42LjAgMCAwIDUxLjgtNzIuOWMtMjQtMTEyLTk4LjYtMjE2LjMtMTgwLjUtMjE2LjUtMS4zOC4wLTIuNy4xLTQgLjEtMS4zOC4wLTIuNy0uMS00LS4xeiIgc3R5bGU9ImxpbmUtaGVpZ2h0OjEyNSUiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBsZXR0ZXItc3BhY2luZz0iMCIgd29yZC1zcGFjaW5nPSIwIi8+PHBhdGggZmlsbD0iIzk1OTU5NSIgZD0iTTEzMS4zIDY5Mi42aDExLjRsLTIwLjkyLTEzOC4zSDEwOS41TDg4LjYgNjkyLjZIMWUybDUuODgtNDUuOGgxOS4zNnptLTI0LjItNTQuOTYgOC40Ni02NC4zIDguNDcgNjQuM3ptODIuMDUtODMuMzRIMTQ4djEwLjczaDE0Ljg3VjY5Mi42aDExLjRWNTY1LjA0aDE0Ljg4eiIgc3R5bGU9ImxpbmUtaGVpZ2h0OjEyNSU7LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlvbjonRXZlciBBZnRlciwgTm9ybWFsJzt0ZXh0LWFsaWduOnN0YXJ0IiBmb250LWZhbWlseT0iRXZlciBBZnRlciIgbGV0dGVyLXNwYWNpbmc9IjAiIHdvcmQtc3BhY2luZz0iMCIvPjxwYXRoIGZpbGw9IiM5NTk1OTUiIGQ9Ik0yMjguNjUgNTU0LjNIMTg3LjV2MTAuNzNoMTQuODdWNjkyLjZoMTEuNFY1NjUuMDRoMTQuODh6bTQ0LjkuMHY2MS4zOEgyNDUuMlY1NTQuM2gtMTEuNDJ2MTM4LjNoMTEuNHYtNjYuMzhoMjguMzZ2NjYuNGgxMS4yM1Y1NTQuM3ptMzcuOCAxMzguM2gtMTEuNFY1NTQuM2gxMS40em01Ny42NS4waDExLjRsLTIwLjkyLTEzOC4zSDM0Ny4ybC0yMC45IDEzOC4zaDExLjRsNS44Ny00NS44aDE5LjM2em0tMjQuMjItNTQuOTYgOC40Ny02NC4zIDguNDcgNjQuM3oiIHN0eWxlPSJsaW5lLWhlaWdodDoxMjUlOy1pbmtzY2FwZS1mb250LXNwZWNpZmljYXRpb246J0V2ZXIgQWZ0ZXIsIE5vcm1hbCc7dGV4dC1hbGlnbjpzdGFydCIgZm9udC1mYW1pbHk9IkV2ZXIgQWZ0ZXIiIGxldHRlci1zcGFjaW5nPSIwIiB3b3JkLXNwYWNpbmc9IjAiLz48cGF0aCBkPSJNNTE3LjI2IDU2NS4wM1Y1NTQuM2gtMzEuNjR2MTM4LjNoMzEuNjR2LTEwLjdoLTIwLjIzdi01NS43aDE4Ljg1di0xMC41NGgtMTguODVWNTY1em0xMS4yNC0xMC43M3YxMzguM2gxMS4zNVY1NTQuM0g1MjguNXptMzkuNzYuMHY1MS44N2wtLjEtLjE3djIwLjc1bC4xLjE3djY1LjdoMTEuMjRWNTU0LjNoLTExLjI0em00MC4yNC4waC0xMy44djEzOC4zaDEzLjgzcTIyLjMuMCAyOS41Ny0yMi40NiA0LjE1LTEzLjMyIDQuMTUtNDYuNjh0LTQuMTUtNDYuNjdxLTcuMjYtMjIuNS0yOS41Ni0yMi41em0tMS4yIDEyNy42aC0xLjJWNTY1LjAyaDEuMnExNS43My4wIDIwLjU3IDE4LjUgMy4xIDExLjA2IDMuMSAzOS45My4wIDI4Ljg3LTMuMSAzOS45My00Ljg0IDE4LjUtMjAuNTcgMTguNXptNjAuMjQuMFY1NTQuM2gtMTEuNHYxMzguM2gzMS42MnYtMTAuN3ptNjIuMS0xMTYuODdWNTU0LjNINjk4djEzOC4zaDMxLjYzdi0xMC43SDcwOS40di01NS43aDE4Ljg1di0xMC41NEg3MDkuNFY1NjV6bTYwLjUgMTI3LjU3cS0xNC4xNy0zNy0yMC43NC03Mi4yNSAxNC4xNy0xMC4zNyAxNC4xNy0zMy44OC4wLTMyLjE2LTI3LjQ4LTMyLjE2aC0xNS4zdjEzOC4zaDExLjR2LTY1cTIuMi0uNSA2LjktMiA3IDMzLjQgMTguMyA2Ny4xem0tMzcuODYtNzguNDd2LTQ5LjFoMi42cTEwLjU0LjAgMTQuNyA1Ljg4IDMuMjcgNC43IDMuMjcgMTUuNi4wIDE1LjgtOC4xMiAyMy40LTUuMiA0LjktMTAuMiA0LjktMS4zOC4wLTIuMjUtLjV6IiBzdHlsZT0ibGluZS1oZWlnaHQ6MTI1JTstaW5rc2NhcGUtZm9udC1zcGVjaWZpY2F0aW9uOidFdmVyIEFmdGVyLCBOb3JtYWwnO3RleHQtYWxpZ246c3RhcnQiIGZvbnQtZmFtaWx5PSJFdmVyIEFmdGVyIiBsZXR0ZXItc3BhY2luZz0iMCIgd29yZC1zcGFjaW5nPSIwIi8+PHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjEwIiBkPSJNNTM1LjA2IDU1NS43MmwzOCAxMzUuNTQiLz48cGF0aCBmaWxsPSIjOTU5NTk1IiBkPSJNLjEgNTU0LjZ2MTM4aDExLjM4VjU3NS42NWM2LjYgMTIuNyAxMy43OCAyNS45IDE5LjY3IDM2Ljc4bDUuNyAxMCAuMDItLjAydi4xbDUuNzItMTBjNi41LTEyIDEzLjUtMjUuMiAxOS43LTM2Ljh2MTE2LjloMTEuMnYtMTM4SDYyLjNDNTUgNTY4IDQ3LjUgNTgyIDQwLjggNTk0LjRsLTQgNy40NWMtOS4xLTE3LjA1LTE3LjMtMzIuMDctMjUuNC00Ny4yM3oiIHN0eWxlPSJsaW5lLWhlaWdodDoxMjUlOy1pbmtzY2FwZS1mb250LXNwZWNpZmljYXRpb246J0V2ZXIgQWZ0ZXIsIE5vcm1hbCc7dGV4dC1hbGlnbjpzdGFydCIgZm9udC1zaXplPSIxNzIuNTIiIGZvbnQtZmFtaWx5PSJFdmVyIEFmdGVyIiBsZXR0ZXItc3BhY2luZz0iMCIgd29yZC1zcGFjaW5nPSIwIi8+PHBhdGggZmlsbD0iIzk1OTU5NSIgZD0iTTM5OC44NCA2OTEuNjZjLTMuNzItMS4zMy04Ljk2LTUtMTEuNzYtOC4yLTEuNC0xLjYtMi41LTMuMjUtMi41NC0zLjYgNC4yMy02LjA1IDQuNDItNi4zMiA1LjMtNy40NSAzLjMgMy40IDYuNyA2LjggMTAuOSA5LjEgNC45OCAxLjggMTEuMjQgMi4xIDE1LjMyLS4zIDUuNTItMy4zIDguNjItOC44IDkuNjctMTcuMyAxLjQ2LTExLjctMi42NS0yMi41LTEzLjI1LTM0LjgtMi45LTMuNC03LjEzLTguMy05LjM4LTEwLjktNC44Ni01LjYtMTAtMTMuNC0xMS43Ny0xOC41LTQuMy0xMi41LTMuODctMjEuMy0uNjYtMzAuMiAyLjEyLTUuODMgNC45LTkuNiA5LjA4LTEyLjIgOC4yNi01LjE0IDE5LjI4LTQuMjQgMjcuMzYgMi4yNS45LjY4IDEuNyAxLjQ0IDIuNSAyLjU3LS40Ljc3LTMuNyA4Ljc3LTQuMyA4Ljc3LS44LS42Ni0uOC0uNi0xLjYtMS4zLS43LS43LTIuNy0yLjEtNC40LTMuMTQtNC40LTIuMS04LjUtMy4xLTEyLjktLjctNi4xIDMuNDQtOS4yIDExLjctNy45IDIxLjQgMS4xIDguMzQgNC41IDE0IDE3LjkgMjkuNSAxMy4wOCAxNS4yIDE2Ljk1IDIyLjMgMTguOSAzNC42My45IDUuNy45IDEwLjA0LjAgMTYuNi0xLjY1IDEyLjMzLTcuMiAyMC41LTE2LjIgMjMuOTYtMy4zIDEuMy0xNi40NSAxLjMtMjAuMDMuMDR6Ii8+PC9zdmc+></a><p>Backend Engineer at trivago. Likes just-in-time compilers and hot chocolate. <a href=/about>About me.</a><nav><ul><li><a href=/>Home</a><li><a target=_blank rel=noopener href=https://twitter.com/matthiasendler>Twitter</a><li><a target=_blank rel=noopener href=https://feedly.com/i/subscription/feed/https://matthias-endler.de/rss.xml>RSS</a></ul></nav></header><main role=main><div class=published-date><i>Published on 10th of July 2017</i></div><h1>Why Type Systems Matter</h1><p>I've written most of my code in dynamically typed languages such as Python or PHP. But ever since dabbling with <a target=_blank rel=noopener href=https://www.rust-lang.org>Rust</a>, I've developed a passion for static type systems.<br>It began to feel very natural to me; like a totally new way to express myself.<h3>Types are here to help</h3><p>With types, you communicate your guarantees and expectations. Both, to the machine and other developers. Types express intent.<p>As a programmer, you've probably gained some <em>intuition</em> about types.<pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#4f5b66>sentence </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>hello world</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p>You might guess that <code>sentence</code> is a string. It's in quotes, after all.
It gets a little more tricky if the type gets <em>inferred</em> from some other location.<pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#4f5b66>sentence </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> x
</span></pre><p>Is <code>sentence</code> still a string? Uhm... we don't know. It depends on the type of <code>x</code>. Maybe <code>x</code> is a number, and so <code>sentence</code> is also a number? Maybe <code>x</code>used to be a string but during refactoring it is now a byte array? Fun times had by all. 🎉<p>What about this one?<pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#4f5b66>filesize </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>5000</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#a7adba>#</span><span style=background-color:#eff1f5;color:#a7adba> Size in bytes
</span></pre><p>Here, we express a file size as a string.<p>While this might work, it's an unsettling idea.<br>Even simple calculations might lead to unexpected results:<pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#4f5b66>file1 </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>5000</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>file2 </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>3000</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>total </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> file1 </span><span style=background-color:#eff1f5;color:#4f5b66>+</span><span style=background-color:#eff1f5;color:#4f5b66> file2
</span><span style=background-color:#eff1f5;color:#96b5b4>print</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>total</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#a7adba>#</span><span style=background-color:#eff1f5;color:#a7adba> prints &#39;50003000&#39;
</span></pre><p>How can we fix that?<p>We can safely assume that a file size is always a number.
To be more precise, it must be a positive, natural number.
There can be no negative file size, and our smallest block of memory is one byte
(on all but the most <a target=_blank rel=noopener href=https://en.wikipedia.org/wiki/4-bit>obscure systems</a>).
And since we're dealing with a discrete machine here, we know it can only be
a filesize the computer can handle.
If we only could express all of this in a precise way...?<p>This is where type systems enter the stage.<br>In Rust, you could define a <code>File</code> type with a field named <code>size</code>.<pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#b48ead>struct</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>File</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>{</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>  </span><span style=background-color:#eff1f5;color:#bf616a>name</span><span style=background-color:#eff1f5;color:#4f5b66>:</span><span style=background-color:#eff1f5;color:#4f5b66> String,
</span><span style=background-color:#eff1f5;color:#4f5b66>  </span><span style=background-color:#eff1f5;color:#bf616a>size</span><span style=background-color:#eff1f5;color:#4f5b66>:</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#b48ead>usize</span><span style=background-color:#eff1f5;color:#4f5b66>,
</span><span style=background-color:#eff1f5;color:#4f5b66>}</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p>The <code>usize</code> gives you the guarantee to be always big enough to hold any pointer into memory (on 64 bit computers <a target=_blank rel=noopener href=https://stackoverflow.com/a/29592369/270334><code>usize = u64</code></a>).
Now there is no more ambiguity about the type of <code>size</code>.
You can't even create an invalid file object:<pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#a7adba>//</span><span style=background-color:#eff1f5;color:#a7adba> Error: `size` can&#39;t be a string.
</span><span style=background-color:#eff1f5;color:#b48ead>let</span><span style=background-color:#eff1f5;color:#4f5b66> weird_file </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> File </span><span style=background-color:#eff1f5;color:#4f5b66>{</span><span style=background-color:#eff1f5;color:#4f5b66> name</span><span style=background-color:#eff1f5;color:#4f5b66>:</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>123</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> size</span><span style=background-color:#eff1f5;color:#4f5b66>:</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>hello</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>}</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p>The type system will prevent invalid state. It will simply not allow you to
break your own rules. It will hold you accountable for your design choices.
Dare I say it: it becomes an extension of your brain.
After some time you start to rely on the type checker. &quot;If it compiles, it runs&quot;
is a powerful mantra.<h3>Types improve readability and provide context</h3><p>Consider the following Python snippet:<pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#b48ead>def</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#8fa1b3>filter_files</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#bf616a>files</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>:</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>  </span><span style=background-color:#eff1f5;color:#4f5b66>matches </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>[</span><span style=background-color:#eff1f5;color:#4f5b66>]</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>  </span><span style=background-color:#eff1f5;color:#b48ead>for</span><span style=background-color:#eff1f5;color:#4f5b66> file </span><span style=background-color:#eff1f5;color:#b48ead>in</span><span style=background-color:#eff1f5;color:#4f5b66> files</span><span style=background-color:#eff1f5;color:#4f5b66>:</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#b48ead>if</span><span style=background-color:#eff1f5;color:#4f5b66> file</span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#4f5b66>status </span><span style=background-color:#eff1f5;color:#4f5b66>==</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>0</span><span style=background-color:#eff1f5;color:#4f5b66>:</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>      </span><span style=background-color:#eff1f5;color:#4f5b66>matches</span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#bf616a>append</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>file</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>  </span><span style=background-color:#eff1f5;color:#b48ead>return</span><span style=background-color:#eff1f5;color:#4f5b66> matches
</span></pre><p>What does <code>0</code> represent?
We can't say. We lack the context!<p>The story gets a little clearer once we define an <a target=_blank rel=noopener href=https://docs.python.org/3/library/enum.html>enum</a> type like this:<pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#b48ead>from</span><span style=background-color:#eff1f5;color:#4f5b66> enum </span><span style=background-color:#eff1f5;color:#b48ead>import</span><span style=background-color:#eff1f5;color:#4f5b66> Enum</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#b48ead>class</span><span style=background-color:#eff1f5;color:#343d46> </span><span style=background-color:#eff1f5;color:#d08770>FileStatus</span><span style=background-color:#eff1f5;color:#343d46>(</span><span style=background-color:#eff1f5;color:#a3be8c>Enum</span><span style=background-color:#eff1f5;color:#343d46>)</span><span style=background-color:#eff1f5;color:#343d46>:</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>  </span><span style=background-color:#eff1f5;color:#4f5b66>OPEN </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>0</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>  </span><span style=background-color:#eff1f5;color:#4f5b66>CLOSED </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>1</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p>Our example from above becomes<pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#b48ead>def</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#8fa1b3>filter_files</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#bf616a>files</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>:</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>  </span><span style=background-color:#eff1f5;color:#4f5b66>matches </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>[</span><span style=background-color:#eff1f5;color:#4f5b66>]</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>  </span><span style=background-color:#eff1f5;color:#b48ead>for</span><span style=background-color:#eff1f5;color:#4f5b66> file </span><span style=background-color:#eff1f5;color:#b48ead>in</span><span style=background-color:#eff1f5;color:#4f5b66> files</span><span style=background-color:#eff1f5;color:#4f5b66>:</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#b48ead>if</span><span style=background-color:#eff1f5;color:#4f5b66> file</span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#4f5b66>status </span><span style=background-color:#eff1f5;color:#4f5b66>==</span><span style=background-color:#eff1f5;color:#4f5b66> FileStatus</span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#4f5b66>OPEN</span><span style=background-color:#eff1f5;color:#4f5b66>:</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>      </span><span style=background-color:#eff1f5;color:#4f5b66>matches</span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#bf616a>append</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>file</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>  </span><span style=background-color:#eff1f5;color:#b48ead>return</span><span style=background-color:#eff1f5;color:#4f5b66> matches
</span></pre><p>In a larger codebase, <code>FileStatus.OPEN</code> is much easier to search for than <code>0</code>.<p><strong>Note:</strong> The native enum type was <a target=_blank rel=noopener href=https://www.python.org/dev/peps/pep-0435/>introduced very late in the history of Python</a>. It serves as a nice
example of how enhancing the type system can help improve readability.<h3>When you combine different types, magic happens.</h3><p>All pieces suddenly fall into place when you choose your types wisely. Out of nowhere, the compiler will start
checking your design decisions and if all your types work well together. It will point out flaws in your mental model.
This gives you a great amount of confidence during refactoring.<p>For example, let's think about sorting things.
When I think of sorting, I first think about a list of numbers:<pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#96b5b4>sorted</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>[</span><span style=background-color:#eff1f5;color:#d08770>1</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#d08770>5</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#d08770>4</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#d08770>3</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#d08770>2</span><span style=background-color:#eff1f5;color:#4f5b66>]</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#a7adba>#</span><span style=background-color:#eff1f5;color:#a7adba> [1,2,3,4,5]
</span></pre><p>That's the happy path. How about this one?<pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#96b5b4>sorted</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#d08770>1</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p>Ouch. This can't work because <code>1</code> is a single number and not a collection!
If we forget to check the type before we pass it to <code>sorted</code>, we get an error
while the program runs.<pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#96b5b4>sorted</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>[</span><span style=background-color:#eff1f5;color:#d08770>1</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>fish</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>]</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p>In Python 2, this would result in <code>[1, 'fish']</code> (<strike>because strings will be compared by length</strike>)<p>Edit: Reddit user <a target=_blank rel=noopener href=https://www.reddit.com/r/rust/comments/6mknzp/why_type_systems_matter/dk2jtcm/>jcdyer3 pointed out</a> that the reason is that when incomparable types are compared, they sort by their type, so all ints will come before all strings. It's a <a target=_blank rel=noopener href=https://stackoverflow.com/a/3270689/270334>CPython implementation detail</a>).<figure><img src=/img/posts/2017/type-systems/fish.svg alt="1 < fish according to Python 2"><figcaption>Illustration provided by <a target=_blank rel=noopener href=http://www.freepik.com/free-vector/sealife-animals-collection_1072064.htm>Freepik.com</a>.</figcaption></figure><p>Since Python 3, this throws an Exception.<pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#4f5b66>TypeError</span><span style=background-color:#eff1f5;color:#4f5b66>:</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&#39;</span><span style=background-color:#eff1f5;color:#a3be8c>&lt;</span><span style=background-color:#eff1f5;color:#4f5b66>&#39;</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>not</span><span style=background-color:#eff1f5;color:#4f5b66> supported between instances of </span><span style=background-color:#eff1f5;color:#4f5b66>&#39;</span><span style=background-color:#eff1f5;color:#a3be8c>str</span><span style=background-color:#eff1f5;color:#4f5b66>&#39;</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>and</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&#39;</span><span style=background-color:#eff1f5;color:#a3be8c>int</span><span style=background-color:#eff1f5;color:#4f5b66>&#39;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p>Much better! One less source of error. The problematic thing is though, that this happens at runtime.
That's because of Python's dynamic typing.
We could have avoided that with a statically typed language.<pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#b48ead>fn</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#8fa1b3>sorted</span><span style=background-color:#eff1f5;color:#4f5b66>&lt;</span><span style=background-color:#eff1f5;color:#4f5b66>T</span><span style=background-color:#eff1f5;color:#4f5b66>&gt;</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#bf616a>collection</span><span style=background-color:#eff1f5;color:#4f5b66>:</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&amp;</span><span style=background-color:#eff1f5;color:#b48ead>mut</span><span style=background-color:#eff1f5;color:#4f5b66> [T]</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#b48ead>where</span><span style=background-color:#eff1f5;color:#4f5b66> T</span><span style=background-color:#eff1f5;color:#4f5b66>:</span><span style=background-color:#eff1f5;color:#4f5b66> PartialOrd </span><span style=background-color:#eff1f5;color:#4f5b66>{</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>  </span><span style=background-color:#eff1f5;color:#a7adba>//</span><span style=background-color:#eff1f5;color:#a7adba> TODO: Sort the collection here.
</span><span style=background-color:#eff1f5;color:#4f5b66>}</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p>Looks scary but it really isn't.<p>We define a function named <code>sorted</code> which takes one input parameter named
<code>collection</code>.<p>The type of <code>collection</code> consists of four parts:<ol><li>The <code>&amp;</code> means that we &quot;borrow&quot; the collection, we don't own it. After the function returns, it will still exist. It won't be cleaned up.<li>The <code>mut</code> means that the collection is mutable. We are allowed to modify it.<li><code>[T]</code> indicates that we expect a list/slice/vector as input. Everything else
will be rejected at compile time (before the program even runs).<li><a target=_blank rel=noopener href=https://doc.rust-lang.org/std/cmp/trait.PartialOrd.html><code>PartialOrd</code></a> is
the magic sauce. It is a <a target=_blank rel=noopener href=https://doc.rust-lang.org/book/second-edition/ch10-02-traits.html>trait</a>, which is something like an interface. It means that all elements <code>T</code> in the collection must be <a target=_blank rel=noopener href=https://en.wikipedia.org/wiki/Partially_ordered_set>partially ordered</a>.</ol><p>All of this information helps the compiler to prevent us from shooting ourselves in the foot.
And we can understand the inputs and outputs of the function without looking elsewhere.<h3>Takeaways</h3><ul><li>Types force developers to do their homework and think about the guarantees and limitations of their code.<li>Don't think of types as constraints, think of them as a safety net which will protect you from your own flawed mental models.<li>Always choose the type which most precisely expresses your intentions.<li>If there is no perfect type in the standard library, create your own from simpler types.</ul><p>Following these rules, I found that I was magically guided towards the most elegant representation of my ideas.
My code became much more idiomatic.<ul class=links><li>💬 Comments available on
<a target=_blank rel=noopener href="https://news.ycombinator.com/item?id=15046896">Hacker News</a>
and
<a target=_blank rel=noopener href=https://www.reddit.com/r/rust/comments/6mknzp/why_type_systems_matter/>Reddit</a>.</ul></main><footer><form style="border:1px solid #ccc;padding:30px;text-align:center" action=https://tinyletter.com/mre method=post target=popupwindow onsubmit="window.open('https://tinyletter.com/mre','popupwindow','scrollbars=yes,width=800,height=600');return true"><p><label for=tlemail>Subscribe to newsletter <i style=color:#aaa>(one mail per month)</i></label><p><input class="field email" type=email name=email id=tlemail placeholder="E-Mail Address">
<input type=hidden value=1 name=embed><input class="field submit" type=submit value=Subscribe><p>💡 I also <a target=_blank rel=noopener href=https://twitter.com/matthiasendler>tweet</a> new articles and have an <a target=_blank rel=noopener href=https://feedly.com/i/subscription/feed/https://matthias-endler.de/rss.xml>RSS feed</a>.</form><h3>Continue reading</h3><ul><li><a href=/2018/cargo-inspect>cargo-inspect</a><li><a href=/2018/excel>The Unreasonable Effectiveness of Excel Macros</a><li><a href=/2018/keyboard>Switching from a German to a US Keyboard Layout - Is It Worth It?</a><li><a href=/2018/fastcat>fastcat - A Faster `cat` Implementation Using Splice</a><li><a href=/2018/github>That Octocat on the Wall</a></ul></footer><script>if(location.hostname!=="localhost"&&location.hostname!=="127.0.0.1"){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-693428-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script>