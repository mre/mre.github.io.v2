<!doctype html><html lang=en><style>﻿html,body,div,form,fieldset,legend,label,h1{margin:0;padding:0}table{border-collapse:collapse;border-spacing:0}th,td{text-align:left;vertical-align:top}h1,h2,h3,h4,h5,h6,th,td,caption{font-weight:400}img{border:0;max-width:100%}h1{font-size:1.87em}h2{font-size:1.2em;margin-bottom:10px;margin-top:0}h3{margin-top:50px}body{background-color:#fff;color:rgba(0,0,0,.8);font-family:medium-content-serif-font,Georgia,Cambria,times new roman,Times,serif;-moz-font-feature-settings:"liga" on;font-feature-settings:"liga" on;font-size:1.25em;-moz-osx-font-smoothing:grayscale;font-style:normal;font-weight:400;letter-spacing:-.003em;line-height:1.58;text-rendering:optimizeLegibility}article{margin-top:44px}pre{-moz-font-feature-settings:"liga" off;font-feature-settings:"liga" off;font-size:.92em;-moz-osx-font-smoothing:auto;-webkit-font-smoothing:subpixel-antialiased;padding:20px;overflow:auto}::-moz-selection{background:#000;color:#fff}::selection{background:#000;color:#fff}body{margin-top:8%}header{font-size:.78em;margin:0 auto 2em;max-width:220px;text-align:center}a:link,a:visited,a:hover,a:active{color:#af403c;text-decoration:none}a:hover{text-decoration:underline}nav{text-align:center}nav ul{display:inline-block;text-align:initial;padding-left:0}nav li:not(:first-child):before{content:" · "}nav li{list-style:none;display:inline}.logo{background-size:cover;display:inline-block;height:150px;width:171px}.published-date{color:#888;font-size:.8em}blockquote{border-left:4px solid #ededee;font-style:italic;margin:4px 10px;padding:3px 20px}code{background-color:#f9f9fa;border:1px solid #ededee;border-radius:6px;display:inline-block;font-family:courier new,courier,monospace;-moz-font-feature-settings:"liga" off;font-feature-settings:"liga" off;font-size:16px;-moz-osx-font-smoothing:auto;-webkit-font-smoothing:subpixel-antialiased;max-width:100%;overflow-x:auto;padding:0 5px;vertical-align:middle;word-wrap:normal;box-shadow:0 1px 1px rgba(0,0,0,.125)}.button{background-color:#af403c;border-radius:10px;color:#fff;margin:40px auto;padding:10px;text-align:center}.button:hover{background-color:red}.talk{margin-top:80px}.video-container{position:relative;padding-bottom:56.25%;padding-top:30px;height:0;overflow:hidden;margin-bottom:40px}.video-container iframe,.video-container object,.video-container embed{position:absolute;top:0;left:0;width:100%;height:100%}figure{font-size:.9em;font-style:italic;margin:0 0 40px;padding:0;text-align:center;text-indent:0}figcaption{margin-top:10px}.loader{position:relative;overflow:hidden;width:auto}.loader object{position:absolute}.loader img,.loader object{display:block;top:0;left:0;width:100%}object{position:relative;float:left;display:block}object::after{position:absolute;top:0;left:0;display:block;width:1e3px;height:1e3px;content:"";background:#efefef}.frozen{-webkit-filter:blur(8px);-moz-filter:blur(8px);-o-filter:blur(8px);-ms-filter:blur(8px);filter:blur(8px);transform:scale(1.04);animation:.2s ease-in .4s 1 forwards fade;width:100%}@keyframes fade{0%{opacity:1}100%{opacity:0}}@media(max-width:520px){body{padding:0 20px}pre{font-size:.85em;padding:5px}h1{font-size:1.6em}}@media(min-width:520px){body{margin:10% auto 0;margin-top:120px;width:480px}h1{font-size:1.6em}}@media(min-width:1024px){body{width:850px}header{float:left;width:210px}main,footer{margin-left:260px;margin-bottom:40px}}footer{margin-bottom:40px}.links{list-style:none;display:inline}.field{padding:10px;font-size:.8em}.email{width:300px}.submit{border:0;padding:12px;background-color:#eee}</style><link rel=dns-prefetch href=//www.google-analytics.com/><link rel=apple-touch-icon sizes=180x180 href="/apple-touch-icon.png?v=m2llJQPQq8"><link rel=icon type=image/png sizes=32x32 href="/favicon-32x32.png?v=m2llJQPQq8"><link rel=icon type=image/png sizes=16x16 href="/favicon-16x16.png?v=m2llJQPQq8"><link rel=manifest href="data:application/manifest+json;base64,eyJzaG9ydF9uYW1lIjoiRW5kbGVyIiwiaWNvbnMiOlt7InNyYyI6Ii9hbmRyb2lkLWNocm9tZS0xOTJ4MTkyLnBuZz92PW0ybGxKUVBRcTgiLCJzaXplcyI6IjE5MngxOTIiLCJ0eXBlIjoiaW1hZ2UvcG5nIn0seyJzcmMiOiIvYW5kcm9pZC1jaHJvbWUtNTEyeDUxMi5wbmc/dj1tMmxsSlFQUXE4Iiwic2l6ZXMiOiI1MTJ4NTEyIiwidHlwZSI6ImltYWdlL3BuZyJ9XX0="><link rel=mask-icon href="/safari-pinned-tab.svg?v=m2llJQPQq8" color=#5bbad5><link rel="shortcut icon" href="/favicon.ico?v=m2llJQPQq8"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content=#ffffff><meta property=og:title content="Rust for Rubyists"><meta property=og:type content=website><meta property=og:description content="Recently I came across a delightful article ..."><meta property=og:url content=https://matthias-endler.de/2017/rust-for-rubyists><meta property=og:image content=https://matthias-endler.de/img/social/default.png><meta name=twitter:title content="Rust for Rubyists"><meta name=twitter:description content="Recently I came across a delightful article ..."><meta name=twitter:card content=summary_large_image><meta name=twitter:site content=@matthiasendler><meta name=twitter:creator content=@matthiasendler><meta name=twitter:image content=https://matthias-endler.de/img/social/default.png><title>Rust for Rubyists - Idiomatic Patterns in Rust and Ruby | Matthias Endler</title><meta name=author content="Matthias Endler"><meta name=description content="Personal website of Matthias Endler, a Software Engineer interested in low-level programming and backend development. PHP, Python, Go, Rust."><link rel=stylesheet href=/assets/posts/rust-for-rubyists.css><header><a class=logo href=/><img alt=Home src=data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA3OTAuMjMgNjkyLjYxIj48Y2lyY2xlIGN4PSI0MTMuMjQiIGN5PSIyMjcuNyIgcj0iMjE5LjY4IiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMTYuMDMiIHN0eWxlPSJsaW5lLWhlaWdodDoxMjUlIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgbGV0dGVyLXNwYWNpbmc9IjAiIHdvcmQtc3BhY2luZz0iMCIvPjxnIGZpbGwtcnVsZT0iZXZlbm9kZCIgc3Ryb2tlPSIjYTE2MjAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgbGV0dGVyLXNwYWNpbmc9IjAiIHdvcmQtc3BhY2luZz0iMCI+PHBhdGggZmlsbD0iIzMzMWYwMCIgc3Ryb2tlLXdpZHRoPSIxLjk3IiBkPSJNNDgzLjc1IDI2NS43NGwtNjcuMDcgNDAuMTQtNzQuMjMtMzkuNTMgMTQxLjMtLjZ6IiBzdHlsZT0ibGluZS1oZWlnaHQ6MTI1JSIvPjxwYXRoIGZpbGw9IiNlZmJhMDAiIHN0cm9rZS13aWR0aD0iMiIgZD0iTTQ4Ni42NSAyNjUuOTJsLTcwLjIgMzQuMDItNzYuOS0zMy45IDE0Ny4xLS4xMnoiIHN0eWxlPSJsaW5lLWhlaWdodDoxMjUlIi8+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2OC42NCAyLjkxNCkgc2NhbGUoLjY1Nzk1KSIgc3R5bGU9ImxpbmUtaGVpZ2h0OjEyNSUiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBsZXR0ZXItc3BhY2luZz0iMCIgd29yZC1zcGFjaW5nPSIwIj48ZWxsaXBzZSBjeD0iLTYwOC43NSIgY3k9Ii0xNjMuMTQiIHRyYW5zZm9ybT0ibWF0cml4KDEuMjQ4OTcgLS4xMTM3IC4xMDcgMS4xNzUxNyAxMDk1Ljg3IDQ2Ni43KSIgcng9IjI1LjI1IiByeT0iMjgiLz48ZWxsaXBzZSBjeD0iMzMxLjM2IiBjeT0iMzQ3Ljk5IiBmaWxsPSIjZmZmIiB0cmFuc2Zvcm09Im1hdHJpeCguNTIyMTMgMCAwIC41NDc0NSAxNTguNzU3IDEzNi40MzIpIiByeD0iMTUuMTUiIHJ5PSIxNy4wNCIvPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNjguNjQgMi45MTQpIHNjYWxlKC42NTc5NSkiIHN0eWxlPSJsaW5lLWhlaWdodDoxMjUlIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgbGV0dGVyLXNwYWNpbmc9IjAiIHdvcmQtc3BhY2luZz0iMCI+PGVsbGlwc2UgY3g9Ii02MDguNzUiIGN5PSItMTYzLjE0IiB0cmFuc2Zvcm09Im1hdHJpeCgxLjI0ODk3IC0uMTEzNyAuMTA3IDEuMTc1MTcgMTIwMy4yIDQ2Ny42NDYpIiByeD0iMjUuMjUiIHJ5PSIyOCIvPjxlbGxpcHNlIGN4PSIzMzEuMzYiIGN5PSIzNDcuOTkiIGZpbGw9IiNmZmYiIHRyYW5zZm9ybT0ibWF0cml4KC41MjIxMyAwIDAgLjU0NzQ1IDI2NS4zNTggMTM2Ljk5MykiIHJ4PSIxNS4xNSIgcnk9IjE3LjA0Ii8+PC9nPjxnIGZpbGwtcnVsZT0iZXZlbm9kZCIgc3Ryb2tlPSIjMDAwIj48cGF0aCBkPSJNMzY2LjQgMTAwLjY0YzE4LjU0LTExLjA1IDM2LjU0LTIyLjU3IDQ2Ljk0LTQwLjczIDEuMzUgMTIuMy0uMSAyOC41LTEwLjg2IDQzLjUiLz48cGF0aCBkPSJNMzg5LjQ0IDEwMC42NGMxOC41NC0xMS4wNSAzNi41NC0yMi41NyA0Ni45NC00MC43MyAxLjM1IDEyLjMtLjEgMjguNS0xMC44NiA0My41Ii8+PHBhdGggZD0iTTQxMi40OCAxMDAuNjRDNDMxLjAyIDg5LjYgNDQ5IDc4LjA3IDQ1OS40MiA1OS45YzEuMzUgMTIuMy0uMSAyOC40NC0xMC44NiA0My40NiIvPjwvZz48cGF0aCBkPSJNNDA5LjI0IDg3LjA1Yy04MS44NS4yNy0xNTYuNDQgMTA0LjQzLTE4MC40OCAyMTYuNDZhMTk5LjYgMTk5LjYuMCAwIDAgNTEuODMgNzMuMWM3LjktMTU3LjkgNDQuNy0yNjYuOSAxMTIuNS0yMDcuOCAxMC4xIDguOSAxNS4yIDEyLjkgMjAuMSAxMi42IDQuOS4zIDEwLTMuOCAyMC4xLTEyLjYgNjcuNy01OS4xIDEwNC42IDUwIDExMi41IDIwNy44YTE5OS42IDE5OS42LjAgMCAwIDUxLjgtNzIuOWMtMjQtMTEyLTk4LjYtMjE2LjMtMTgwLjUtMjE2LjUtMS4zOC4wLTIuNy4xLTQgLjEtMS4zOC4wLTIuNy0uMS00LS4xeiIgc3R5bGU9ImxpbmUtaGVpZ2h0OjEyNSUiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBsZXR0ZXItc3BhY2luZz0iMCIgd29yZC1zcGFjaW5nPSIwIi8+PHBhdGggZmlsbD0iIzk1OTU5NSIgZD0iTTEzMS4zIDY5Mi42aDExLjRsLTIwLjkyLTEzOC4zSDEwOS41TDg4LjYgNjkyLjZIMWUybDUuODgtNDUuOGgxOS4zNnptLTI0LjItNTQuOTYgOC40Ni02NC4zIDguNDcgNjQuM3ptODIuMDUtODMuMzRIMTQ4djEwLjczaDE0Ljg3VjY5Mi42aDExLjRWNTY1LjA0aDE0Ljg4eiIgc3R5bGU9ImxpbmUtaGVpZ2h0OjEyNSU7LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlvbjonRXZlciBBZnRlciwgTm9ybWFsJzt0ZXh0LWFsaWduOnN0YXJ0IiBmb250LWZhbWlseT0iRXZlciBBZnRlciIgbGV0dGVyLXNwYWNpbmc9IjAiIHdvcmQtc3BhY2luZz0iMCIvPjxwYXRoIGZpbGw9IiM5NTk1OTUiIGQ9Ik0yMjguNjUgNTU0LjNIMTg3LjV2MTAuNzNoMTQuODdWNjkyLjZoMTEuNFY1NjUuMDRoMTQuODh6bTQ0LjkuMHY2MS4zOEgyNDUuMlY1NTQuM2gtMTEuNDJ2MTM4LjNoMTEuNHYtNjYuMzhoMjguMzZ2NjYuNGgxMS4yM1Y1NTQuM3ptMzcuOCAxMzguM2gtMTEuNFY1NTQuM2gxMS40em01Ny42NS4waDExLjRsLTIwLjkyLTEzOC4zSDM0Ny4ybC0yMC45IDEzOC4zaDExLjRsNS44Ny00NS44aDE5LjM2em0tMjQuMjItNTQuOTYgOC40Ny02NC4zIDguNDcgNjQuM3oiIHN0eWxlPSJsaW5lLWhlaWdodDoxMjUlOy1pbmtzY2FwZS1mb250LXNwZWNpZmljYXRpb246J0V2ZXIgQWZ0ZXIsIE5vcm1hbCc7dGV4dC1hbGlnbjpzdGFydCIgZm9udC1mYW1pbHk9IkV2ZXIgQWZ0ZXIiIGxldHRlci1zcGFjaW5nPSIwIiB3b3JkLXNwYWNpbmc9IjAiLz48cGF0aCBkPSJNNTE3LjI2IDU2NS4wM1Y1NTQuM2gtMzEuNjR2MTM4LjNoMzEuNjR2LTEwLjdoLTIwLjIzdi01NS43aDE4Ljg1di0xMC41NGgtMTguODVWNTY1em0xMS4yNC0xMC43M3YxMzguM2gxMS4zNVY1NTQuM0g1MjguNXptMzkuNzYuMHY1MS44N2wtLjEtLjE3djIwLjc1bC4xLjE3djY1LjdoMTEuMjRWNTU0LjNoLTExLjI0em00MC4yNC4waC0xMy44djEzOC4zaDEzLjgzcTIyLjMuMCAyOS41Ny0yMi40NiA0LjE1LTEzLjMyIDQuMTUtNDYuNjh0LTQuMTUtNDYuNjdxLTcuMjYtMjIuNS0yOS41Ni0yMi41em0tMS4yIDEyNy42aC0xLjJWNTY1LjAyaDEuMnExNS43My4wIDIwLjU3IDE4LjUgMy4xIDExLjA2IDMuMSAzOS45My4wIDI4Ljg3LTMuMSAzOS45My00Ljg0IDE4LjUtMjAuNTcgMTguNXptNjAuMjQuMFY1NTQuM2gtMTEuNHYxMzguM2gzMS42MnYtMTAuN3ptNjIuMS0xMTYuODdWNTU0LjNINjk4djEzOC4zaDMxLjYzdi0xMC43SDcwOS40di01NS43aDE4Ljg1di0xMC41NEg3MDkuNFY1NjV6bTYwLjUgMTI3LjU3cS0xNC4xNy0zNy0yMC43NC03Mi4yNSAxNC4xNy0xMC4zNyAxNC4xNy0zMy44OC4wLTMyLjE2LTI3LjQ4LTMyLjE2aC0xNS4zdjEzOC4zaDExLjR2LTY1cTIuMi0uNSA2LjktMiA3IDMzLjQgMTguMyA2Ny4xem0tMzcuODYtNzguNDd2LTQ5LjFoMi42cTEwLjU0LjAgMTQuNyA1Ljg4IDMuMjcgNC43IDMuMjcgMTUuNi4wIDE1LjgtOC4xMiAyMy40LTUuMiA0LjktMTAuMiA0LjktMS4zOC4wLTIuMjUtLjV6IiBzdHlsZT0ibGluZS1oZWlnaHQ6MTI1JTstaW5rc2NhcGUtZm9udC1zcGVjaWZpY2F0aW9uOidFdmVyIEFmdGVyLCBOb3JtYWwnO3RleHQtYWxpZ246c3RhcnQiIGZvbnQtZmFtaWx5PSJFdmVyIEFmdGVyIiBsZXR0ZXItc3BhY2luZz0iMCIgd29yZC1zcGFjaW5nPSIwIi8+PHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjEwIiBkPSJNNTM1LjA2IDU1NS43MmwzOCAxMzUuNTQiLz48cGF0aCBmaWxsPSIjOTU5NTk1IiBkPSJNLjEgNTU0LjZ2MTM4aDExLjM4VjU3NS42NWM2LjYgMTIuNyAxMy43OCAyNS45IDE5LjY3IDM2Ljc4bDUuNyAxMCAuMDItLjAydi4xbDUuNzItMTBjNi41LTEyIDEzLjUtMjUuMiAxOS43LTM2Ljh2MTE2LjloMTEuMnYtMTM4SDYyLjNDNTUgNTY4IDQ3LjUgNTgyIDQwLjggNTk0LjRsLTQgNy40NWMtOS4xLTE3LjA1LTE3LjMtMzIuMDctMjUuNC00Ny4yM3oiIHN0eWxlPSJsaW5lLWhlaWdodDoxMjUlOy1pbmtzY2FwZS1mb250LXNwZWNpZmljYXRpb246J0V2ZXIgQWZ0ZXIsIE5vcm1hbCc7dGV4dC1hbGlnbjpzdGFydCIgZm9udC1zaXplPSIxNzIuNTIiIGZvbnQtZmFtaWx5PSJFdmVyIEFmdGVyIiBsZXR0ZXItc3BhY2luZz0iMCIgd29yZC1zcGFjaW5nPSIwIi8+PHBhdGggZmlsbD0iIzk1OTU5NSIgZD0iTTM5OC44NCA2OTEuNjZjLTMuNzItMS4zMy04Ljk2LTUtMTEuNzYtOC4yLTEuNC0xLjYtMi41LTMuMjUtMi41NC0zLjYgNC4yMy02LjA1IDQuNDItNi4zMiA1LjMtNy40NSAzLjMgMy40IDYuNyA2LjggMTAuOSA5LjEgNC45OCAxLjggMTEuMjQgMi4xIDE1LjMyLS4zIDUuNTItMy4zIDguNjItOC44IDkuNjctMTcuMyAxLjQ2LTExLjctMi42NS0yMi41LTEzLjI1LTM0LjgtMi45LTMuNC03LjEzLTguMy05LjM4LTEwLjktNC44Ni01LjYtMTAtMTMuNC0xMS43Ny0xOC41LTQuMy0xMi41LTMuODctMjEuMy0uNjYtMzAuMiAyLjEyLTUuODMgNC45LTkuNiA5LjA4LTEyLjIgOC4yNi01LjE0IDE5LjI4LTQuMjQgMjcuMzYgMi4yNS45LjY4IDEuNyAxLjQ0IDIuNSAyLjU3LS40Ljc3LTMuNyA4Ljc3LTQuMyA4Ljc3LS44LS42Ni0uOC0uNi0xLjYtMS4zLS43LS43LTIuNy0yLjEtNC40LTMuMTQtNC40LTIuMS04LjUtMy4xLTEyLjktLjctNi4xIDMuNDQtOS4yIDExLjctNy45IDIxLjQgMS4xIDguMzQgNC41IDE0IDE3LjkgMjkuNSAxMy4wOCAxNS4yIDE2Ljk1IDIyLjMgMTguOSAzNC42My45IDUuNy45IDEwLjA0LjAgMTYuNi0xLjY1IDEyLjMzLTcuMiAyMC41LTE2LjIgMjMuOTYtMy4zIDEuMy0xNi40NSAxLjMtMjAuMDMuMDR6Ii8+PC9zdmc+></a><p>Backend Engineer at trivago. Likes just-in-time compilers and hot chocolate. <a href=/about>About me.</a><nav><ul><li><a href=/>Home</a><li><a target=_blank rel=noopener href=https://twitter.com/matthiasendler>Twitter</a><li><a target=_blank rel=noopener href=https://feedly.com/i/subscription/feed/https://matthias-endler.de/rss.xml>RSS</a></ul></nav></header><main role=main><div class=published-date><i>Published on 17th of December 2017</i></div><h1>Rust for Rubyists</h1><i>&mdash; Idiomatic Patterns in Rust and Ruby</i><p>Recently I came across a delightful article on idiomatic Ruby.
I'm not a good Ruby developer by any means, but I realized, that a lot of the patterns are also quite common in Rust.
What follows is a side-by-side comparison of idiomatic code in both languages.<p>The Ruby code samples are from the <a target=_blank rel=noopener href=https://medium.com/the-renaissance-developer/idiomatic-ruby-1b5fa1445098>original article</a>.<h3>Map and Higher-Order Functions</h3><p>The first example is a pretty basic iteration over elements of a container using <code>map</code>.<p><a class=example href=https://gist.github.com/LeandroTk/64ca7d6f5279e08589e21d799544e878#file-map-rb><div class="ruby icon"></div><pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#4f5b66>user_ids </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> users</span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#4f5b66>map </span><span style=background-color:#eff1f5;color:#4f5b66>{</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>|</span><span style=background-color:#eff1f5;color:#bf616a>user</span><span style=background-color:#eff1f5;color:#4f5b66>|</span><span style=background-color:#eff1f5;color:#4f5b66> user</span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#4f5b66>id </span><span style=background-color:#eff1f5;color:#4f5b66>}</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p></a><p>The <code>map</code> concept is also pretty standard in Rust.
Compared to Ruby, we need to be a little more explicit here:
If <code>users</code> is a vector of <code>User</code> objects, we first need to create an iterator from it:<p><a class=example href="https://play.rust-lang.org/?gist=5a61b7b44ff01fabbc07dba9409d9b97&version=stable"><div class="rust icon"></div><pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#b48ead>let</span><span style=background-color:#eff1f5;color:#4f5b66> user_ids </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> users.</span><span style=background-color:#eff1f5;color:#96b5b4>iter</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#96b5b4>map</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>|</span><span style=background-color:#eff1f5;color:#bf616a>user</span><span style=background-color:#eff1f5;color:#4f5b66>|</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>user.id</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p></a><p>You might say that's quite verbose, but this additional abstraction allows us to express an important concept:
will the iterator take ownership of the vector, or will it not?<ul><li>With <code>iter()</code>, you get a &quot;read-only view&quot; into the vector. After the iteration, it will be unchanged.<li>With <code>into_iter()</code>, you take ownership over the vector. After the iteration, the vector will be gone.
In Rust terminology, it will have <em>moved</em>.<li>Read some more about the <a target=_blank rel=noopener href=http://hermanradtke.com/2015/06/22/effectively-using-iterators-in-rust.html>difference between <code>iter()</code> and <code>into_iter()</code> here</a>.</ul><p>The above Ruby code can be simplified like this:<p><a class=example href=https://gist.github.com/LeandroTk/258652cbaea308ccfeddc5df5bb9f37b#file-each_vs_map_3-rb><div class="ruby icon"></div><pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#4f5b66>user_ids </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> users</span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#4f5b66>map</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>&amp;</span><span style=background-color:#eff1f5;color:#a3be8c>:</span><span style=background-color:#eff1f5;color:#a3be8c>id</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p></a><p>In Ruby, higher-order functions (like <code>map</code>) take <a target=_blank rel=noopener href=http://awaxman11.github.io/blog/2013/08/05/what-is-the-difference-between-a-block/>blocks or procs</a> as an argument and the language provides a convenient shortcut for method invocation — <code>&amp;:id</code> is the same as <code>{|o| o.id()}</code>.<p>Something similar could be done in Rust:<p><a class=example href="https://play.rust-lang.org/?gist=131027a481d4691821315ad308d26dc9&version=stable"><div class="rust icon"></div><pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#b48ead>let</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#8fa1b3>id</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>|</span><span style=background-color:#eff1f5;color:#bf616a>u</span><span style=background-color:#eff1f5;color:#4f5b66>:</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&amp;</span><span style=background-color:#eff1f5;color:#4f5b66>User</span><span style=background-color:#eff1f5;color:#4f5b66>|</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>u.id</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#b48ead>let</span><span style=background-color:#eff1f5;color:#4f5b66> user_ids </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> users.</span><span style=background-color:#eff1f5;color:#96b5b4>iter</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#96b5b4>map</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>id</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p></a><p>This is probably not the most idiomatic way to do it, though. What you will see more often is the use of <a target=_blank rel=noopener href=https://doc.rust-lang.org/book/first-edition/ufcs.html>Universal Function Call Syntax</a> in this case:<sup><a href=#fn1 id=ref1>1</a></sup><p><a class=example href="https://play.rust-lang.org/?gist=51069ee76e5d534621ccd6633474b630&version=stable"><div class="rust icon"></div><pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#b48ead>let</span><span style=background-color:#eff1f5;color:#4f5b66> user_ids </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> users.</span><span style=background-color:#eff1f5;color:#96b5b4>iter</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#96b5b4>map</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>User::</span><span style=background-color:#eff1f5;color:#4f5b66>id</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p></a><p>In Rust, higher-order functions take <strong>functions</strong> as an argument. Therefore <code>users.iter().map(Users::id)</code> is more or less equivalent to <code>users.iter().map(|u| u.id())</code>.<sup><a href=#fn2 id=ref2>2</a></sup><p>Also, <code>map()</code> in Rust returns another iterator and not a collection.
If you want a collection, you would have to run <a target=_blank rel=noopener href=https://doc.rust-lang.org/std/iter/trait.Iterator.html#examples-23><code>collect()</code></a> on that, as we'll see later.<h3>Iteration with Each</h3><p>Speaking of iteration, one pattern that I see a lot in Ruby code is this:<p><a class=example href=https://gist.github.com/mre/f6552360a4c08f2c064da7f00d434d5c><div class="ruby icon"></div><pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#4f5b66>[</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>Ruby</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>Rust</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>Python</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>Cobol</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>]</span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#4f5b66>each </span><span style=background-color:#eff1f5;color:#b48ead>do</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>|</span><span style=background-color:#eff1f5;color:#bf616a>lang</span><span style=background-color:#eff1f5;color:#4f5b66>|</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>  </span><span style=background-color:#eff1f5;color:#96b5b4>puts</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>Hello </span><span style=background-color:#eff1f5;color:#ab7967>#{</span><span style=background-color:#eff1f5;color:#a3be8c>lang</span><span style=background-color:#eff1f5;color:#ab7967>}</span><span style=background-color:#eff1f5;color:#a3be8c>!</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#b48ead>end</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p></a><p>Since <a target=_blank rel=noopener href=https://blog.rust-lang.org/2017/10/12/Rust-1.21.html>Rust 1.21</a>, this is now also possible:<p><a class=example href="https://play.rust-lang.org/?gist=549d38bc43549fd5444c731d2bc3a47b&version=stable"><div class="rust icon"></div><pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#4f5b66>[</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>Ruby</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>Rust</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>Python</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>Cobol</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>]</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#96b5b4>iter</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#96b5b4>for_each</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>|</span><span style=background-color:#eff1f5;color:#bf616a>lang</span><span style=background-color:#eff1f5;color:#4f5b66>|</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>println!</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>Hello </span><span style=background-color:#eff1f5;color:#d08770>{lang}</span><span style=background-color:#eff1f5;color:#a3be8c>!</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> lang </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> lang</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p></a><p>Although, more commonly one would write that as a normal for-loop in Rust:<p><a class=example href="https://play.rust-lang.org/?gist=a7691b56b1dfd1fb19aa00a91b39589d&version=stable"><div class="rust icon"></div><pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#b48ead>for</span><span style=background-color:#eff1f5;color:#4f5b66> lang </span><span style=background-color:#eff1f5;color:#4f5b66>in</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>[</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>Ruby</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>Rust</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>Python</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>Cobol</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>]</span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#96b5b4>iter</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>{</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#4f5b66>println!</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>Hello </span><span style=background-color:#eff1f5;color:#d08770>{lang}</span><span style=background-color:#eff1f5;color:#a3be8c>!</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> lang </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> lang</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>}</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p></a><h3>Select and filter</h3><p>Let's say you want to extract only even numbers from a collection in Ruby.<p><a class=example href=https://gist.github.com/LeandroTk/f341051889e27c99ddd66c075e5ef6d0#file-map_vs_select_1-rb><div class="ruby icon"></div><pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#4f5b66>even_numbers </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>[</span><span style=background-color:#eff1f5;color:#d08770>1</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>2</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>3</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>4</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>5</span><span style=background-color:#eff1f5;color:#4f5b66>]</span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#4f5b66>map </span><span style=background-color:#eff1f5;color:#4f5b66>{</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>|</span><span style=background-color:#eff1f5;color:#bf616a>element</span><span style=background-color:#eff1f5;color:#4f5b66>|</span><span style=background-color:#eff1f5;color:#4f5b66> element </span><span style=background-color:#eff1f5;color:#b48ead>if</span><span style=background-color:#eff1f5;color:#4f5b66> element</span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#4f5b66>even? </span><span style=background-color:#eff1f5;color:#4f5b66>}</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#a7adba>#</span><span style=background-color:#eff1f5;color:#a7adba> [ni, 2, nil, 4, nil]
</span><span style=background-color:#eff1f5;color:#4f5b66>even_numbers </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> even_numbers</span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#4f5b66>compact </span><span style=background-color:#eff1f5;color:#a7adba>#</span><span style=background-color:#eff1f5;color:#a7adba> [2, 4]
</span></pre><p></a><p>In this example, before calling <code>compact</code>, our <code>even_numbers</code> array had <code>nil</code> entries.
Well, in Rust there is no concept of <code>nil</code> or <code>Null</code>. You don't need a <code>compact</code>.
Also, <code>map</code> doesn't take predicates. You would use <code>filter</code> for that:<p><a class=example href="https://play.rust-lang.org/?gist=494d6e3ff016c21931e3495b10c8f6ee&version=stable"><div class="rust icon"></div><pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#b48ead>let</span><span style=background-color:#eff1f5;color:#4f5b66> even_numbers </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>vec!</span><span style=background-color:#eff1f5;color:#4f5b66>[</span><span style=background-color:#eff1f5;color:#d08770>1</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>2</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>3</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>4</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>5</span><span style=background-color:#eff1f5;color:#4f5b66>]</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#96b5b4>iter</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#96b5b4>filter</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>|</span><span style=background-color:#eff1f5;color:#4f5b66>&amp;</span><span style=background-color:#eff1f5;color:#bf616a>element</span><span style=background-color:#eff1f5;color:#4f5b66>|</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>element </span><span style=background-color:#eff1f5;color:#4f5b66>%</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>2</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>0</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p></a><p>or, to make a vector out of the result<p><a class=example href="https://play.rust-lang.org/?gist=45c6dbd2d35316c73165c5571d66df9d&version=stable"><div class="rust icon"></div><pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#a7adba>//</span><span style=background-color:#eff1f5;color:#a7adba> Result: [2, 4]
</span><span style=background-color:#eff1f5;color:#b48ead>let</span><span style=background-color:#eff1f5;color:#4f5b66> even_numbers</span><span style=background-color:#eff1f5;color:#4f5b66>:</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>Vec</span><span style=background-color:#eff1f5;color:#4f5b66>&lt;</span><span style=background-color:#eff1f5;color:#b48ead>i64</span><span style=background-color:#eff1f5;color:#4f5b66>&gt;</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>vec!</span><span style=background-color:#eff1f5;color:#4f5b66>[</span><span style=background-color:#eff1f5;color:#d08770>1</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>2</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>3</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>4</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>5</span><span style=background-color:#eff1f5;color:#4f5b66>]</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#96b5b4>into_iter</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#96b5b4>filter</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>|</span><span style=background-color:#eff1f5;color:#bf616a>element</span><span style=background-color:#eff1f5;color:#4f5b66>|</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>element </span><span style=background-color:#eff1f5;color:#4f5b66>%</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>2</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>0</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#96b5b4>collect</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p></a><p>Some hints:<ul><li>I'm using the type hint <code>Vec&lt;i64&gt;</code> here because, without it, Rust does not know what collection I want to build when calling <code>collect</code>.<li><code>vec!</code> is a macro for creating a vector.<li>Instead of <code>iter</code>, I use <code>into_iter</code>. This way, I take ownership of the elements in the vector. With <code>iter()</code> I would get a <code>Vec&lt;&amp;i64&gt;</code> instead.</ul><p>In Rust, there is no <code>even</code> method on numbers, but that doesn't keep us from defining one!<p><a class=example href="https://play.rust-lang.org/?gist=c289c2a1cf8bd870cbd5cc2cd60ea791&version=stable"><div class="rust icon"></div><pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#b48ead>let</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#8fa1b3>even</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>|</span><span style=background-color:#eff1f5;color:#bf616a>x</span><span style=background-color:#eff1f5;color:#4f5b66>:</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&amp;</span><span style=background-color:#eff1f5;color:#b48ead>i64</span><span style=background-color:#eff1f5;color:#4f5b66>|</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>x </span><span style=background-color:#eff1f5;color:#4f5b66>%</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>2</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>0</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#b48ead>let</span><span style=background-color:#eff1f5;color:#4f5b66> even_numbers </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>vec!</span><span style=background-color:#eff1f5;color:#4f5b66>[</span><span style=background-color:#eff1f5;color:#d08770>1</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>2</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>3</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>4</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>5</span><span style=background-color:#eff1f5;color:#4f5b66>]</span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#96b5b4>into_iter</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#96b5b4>filter</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>even</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p></a><p>In a real-world scenario, you would probably use a third-party package (crate) like <a target=_blank rel=noopener href=https://github.com/rust-num/num><code>num</code></a> for numerical mathematics:<p><a class=example href="https://play.rust-lang.org/?gist=e4bbbf60b7b1cbbedfb363672731bf53&version=stable"><div class="rust icon"></div><pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#b48ead>extern</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#b48ead>crate</span><span style=background-color:#eff1f5;color:#4f5b66> num</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#b48ead>use</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>num::</span><span style=background-color:#eff1f5;color:#4f5b66>Integer</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#b48ead>fn</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#8fa1b3>main</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>{</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#b48ead>let</span><span style=background-color:#eff1f5;color:#4f5b66> even_numbers</span><span style=background-color:#eff1f5;color:#4f5b66>:</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>Vec</span><span style=background-color:#eff1f5;color:#4f5b66>&lt;</span><span style=background-color:#eff1f5;color:#b48ead>i64</span><span style=background-color:#eff1f5;color:#4f5b66>&gt;</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>vec!</span><span style=background-color:#eff1f5;color:#4f5b66>[</span><span style=background-color:#eff1f5;color:#d08770>1</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>2</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>3</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>4</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>5</span><span style=background-color:#eff1f5;color:#4f5b66>]</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>        </span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#96b5b4>into_iter</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>        </span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#96b5b4>filter</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>|</span><span style=background-color:#eff1f5;color:#bf616a>x</span><span style=background-color:#eff1f5;color:#4f5b66>|</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>x.</span><span style=background-color:#eff1f5;color:#96b5b4>is_even</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#96b5b4>collect</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>}</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p></a><p>In general, it's quite common to use crates in Rust for functionality that is not in the standard lib.
Part of the reason why this is so well accepted is that <a target=_blank rel=noopener href=https://github.com/rust-lang/cargo>cargo</a> is such a rad package manager.
(Maybe because it was built by no other than <a target=_blank rel=noopener href=http://yehudakatz.com/about/>Yehuda Katz</a> of Ruby fame. 😉)<p>As mentioned before, Rust does not have <code>nil</code>. However, there is still the concept of operations that can fail.
The canonical type to express that is called <a target=_blank rel=noopener href=https://doc.rust-lang.org/std/result/><code>Result</code></a>.<p>Let's say you want to convert a vector of strings to integers.<p><a class=example href="https://play.rust-lang.org/?gist=1365d177503ee2d32c4aa594263ee4d4&version=stable"><div class="rust icon"></div><pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#b48ead>let</span><span style=background-color:#eff1f5;color:#4f5b66> maybe_numbers </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>vec!</span><span style=background-color:#eff1f5;color:#4f5b66>[</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>1</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>2</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>nah</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>nope</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>3</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>]</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#b48ead>let</span><span style=background-color:#eff1f5;color:#4f5b66> numbers</span><span style=background-color:#eff1f5;color:#4f5b66>:</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>Vec</span><span style=background-color:#eff1f5;color:#4f5b66>&lt;</span><span style=background-color:#eff1f5;color:#4f5b66>_</span><span style=background-color:#eff1f5;color:#4f5b66>&gt;</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> maybe_numbers
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#96b5b4>into_iter</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#96b5b4>map</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>|</span><span style=background-color:#eff1f5;color:#bf616a>i</span><span style=background-color:#eff1f5;color:#4f5b66>|</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>i.</span><span style=background-color:#eff1f5;color:#4f5b66>parse::</span><span style=background-color:#eff1f5;color:#4f5b66>&lt;</span><span style=background-color:#eff1f5;color:#b48ead>u64</span><span style=background-color:#eff1f5;color:#4f5b66>&gt;</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#96b5b4>collect</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p></a><p>That looks nice, but maybe the output is a little unexpected. <code>numbers</code> will also contain the parsing errors:<p><a class=example href="https://play.rust-lang.org/?gist=1365d177503ee2d32c4aa594263ee4d4&version=stable"><div class="rust icon"></div><pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#4f5b66>[</span><span style=background-color:#eff1f5;color:#4f5b66>Ok</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#d08770>1</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>Ok</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#d08770>2</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>Err</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>ParseIntError </span><span style=background-color:#eff1f5;color:#4f5b66>{</span><span style=background-color:#eff1f5;color:#4f5b66> kind</span><span style=background-color:#eff1f5;color:#4f5b66>:</span><span style=background-color:#eff1f5;color:#4f5b66> InvalidDigit </span><span style=background-color:#eff1f5;color:#4f5b66>}</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>Err</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>ParseIntError </span><span style=background-color:#eff1f5;color:#4f5b66>{</span><span style=background-color:#eff1f5;color:#4f5b66> kind</span><span style=background-color:#eff1f5;color:#4f5b66>:</span><span style=background-color:#eff1f5;color:#4f5b66> InvalidDigit </span><span style=background-color:#eff1f5;color:#4f5b66>}</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>Ok</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#d08770>3</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>]</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p></a><p>Sometimes you're just interested in the successful operations.
An easy way to filter out the errors is to use <a target=_blank rel=noopener href=https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.filter_map><code>filter_map</code></a>:<p><a class=example href="https://play.rust-lang.org/?gist=afdc823ec2e165ac0a03948fb323d305&version=stable"><div class="rust icon"></div><pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#b48ead>let</span><span style=background-color:#eff1f5;color:#4f5b66> maybe_numbers </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>vec!</span><span style=background-color:#eff1f5;color:#4f5b66>[</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>1</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>2</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>nah</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>nope</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>3</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>]</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#b48ead>let</span><span style=background-color:#eff1f5;color:#4f5b66> numbers</span><span style=background-color:#eff1f5;color:#4f5b66>:</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>Vec</span><span style=background-color:#eff1f5;color:#4f5b66>&lt;</span><span style=background-color:#eff1f5;color:#4f5b66>_</span><span style=background-color:#eff1f5;color:#4f5b66>&gt;</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> maybe_numbers
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#96b5b4>into_iter</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#96b5b4>filter_map</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>|</span><span style=background-color:#eff1f5;color:#bf616a>i</span><span style=background-color:#eff1f5;color:#4f5b66>|</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>i.</span><span style=background-color:#eff1f5;color:#4f5b66>parse::</span><span style=background-color:#eff1f5;color:#4f5b66>&lt;</span><span style=background-color:#eff1f5;color:#b48ead>u64</span><span style=background-color:#eff1f5;color:#4f5b66>&gt;</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#96b5b4>ok</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#96b5b4>collect</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p></a><p>I changed two things here:<ul><li>Instead of <code>map</code>, I'm now using <code>filter_map</code>.<li><code>parse</code> returns a <code>Result</code>, but <code>filter_map</code> expects an <code>Option</code>. We can convert a <code>Result</code> into an <code>Option</code> by calling <code>ok()</code> on it<sup><a href=#fn3 id=ref3>3</a></sup>.</ul><p>The return value contains all successfully converted strings:<p><a class=example href="https://play.rust-lang.org/?gist=afdc823ec2e165ac0a03948fb323d305&version=stable"><div class="rust icon"></div><pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#4f5b66>[</span><span style=background-color:#eff1f5;color:#d08770>1</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>2</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>3</span><span style=background-color:#eff1f5;color:#4f5b66>]</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p></a><p>The <code>filter_map</code> is similar to the <code>select</code> method in Ruby:<p><a class=example href=https://gist.github.com/LeandroTk/1ae24e0fece0207f814932b0ac6c4a5e#file-map_vs_select_2-rb><div class="ruby icon"></div><pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#4f5b66>[</span><span style=background-color:#eff1f5;color:#d08770>1</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>2</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>3</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>4</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>5</span><span style=background-color:#eff1f5;color:#4f5b66>]</span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#96b5b4>select</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>{</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>|</span><span style=background-color:#eff1f5;color:#bf616a>element</span><span style=background-color:#eff1f5;color:#4f5b66>|</span><span style=background-color:#eff1f5;color:#4f5b66> element</span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#4f5b66>even? </span><span style=background-color:#eff1f5;color:#4f5b66>}</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p></a><h3>Random numbers</h3><p>Here's how to get a random number from an array in Ruby:<p><a class=example href="https://play.rust-lang.org/?gist=a66785b44094bacb78fa8dd822bfeab5&version=stable"><div class="ruby icon"></div><pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#4f5b66>[</span><span style=background-color:#eff1f5;color:#d08770>1</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>2</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>3</span><span style=background-color:#eff1f5;color:#4f5b66>]</span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#4f5b66>sample
</span></pre><p></a><p>That's quite nice and idiomatic!
Compare that to Rust:<p><a class=example href="https://play.rust-lang.org/?gist=bed7fca31737bcbf4b9aed427cc22713&version=stable"><div class="rust icon"></div><pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#b48ead>let</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#b48ead>mut</span><span style=background-color:#eff1f5;color:#4f5b66> rng </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#96b5b4>thread_rng</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>rng.</span><span style=background-color:#eff1f5;color:#96b5b4>choose</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>&amp;</span><span style=background-color:#eff1f5;color:#4f5b66>[</span><span style=background-color:#eff1f5;color:#d08770>1</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>2</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>3</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>4</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>5</span><span style=background-color:#eff1f5;color:#4f5b66>]</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p></a><p>For the code to work, you need the <code>rand</code> crate. Click on the snippet for a running example.<p>There are some differences to Ruby. Namely, we need to be more explicit about what random number generator
we want <em>exactly</em>. We decide for a <a target=_blank rel=noopener href=https://doc.rust-lang.org/rand/rand/fn.thread_rng.html>lazily-initialized thread-local random number generator, seeded by the system</a>.
In this case, I'm using a <a target=_blank rel=noopener href=https://doc.rust-lang.org/std/slice/>slice</a> instead of a vector. The main difference is that the slice has a fixed size while the vector does not.<p>Within the standard library, Rust doesn't have a <code>sample</code> or <code>choose</code> method on the slice itself.
That's a design decision: the core of the language is kept small to allow evolving the language in the future.<p>This doesn't mean that you cannot have a nicer implementation today.
For instance, you could define a <code>Choose</code> <a target=_blank rel=noopener href=https://doc.rust-lang.org/book/second-edition/ch10-00-generics.html>trait</a> and implement it for <code>[T]</code>.<p><a class=example href="https://play.rust-lang.org/?gist=a66785b44094bacb78fa8dd822bfeab5&version=stable"><div class="rust icon"></div><pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#b48ead>extern</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#b48ead>crate</span><span style=background-color:#eff1f5;color:#4f5b66> rand</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#b48ead>use</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>rand::</span><span style=background-color:#eff1f5;color:#4f5b66>{</span><span style=background-color:#eff1f5;color:#4f5b66>thread_rng</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> Rng</span><span style=background-color:#eff1f5;color:#4f5b66>}</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#b48ead>trait</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>Choose</span><span style=background-color:#eff1f5;color:#4f5b66>&lt;T&gt; </span><span style=background-color:#eff1f5;color:#4f5b66>{</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#b48ead>fn</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#8fa1b3>choose</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>&amp;</span><span style=background-color:#eff1f5;color:#bf616a>self</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>-&gt;</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>Option</span><span style=background-color:#eff1f5;color:#4f5b66>&lt;</span><span style=background-color:#eff1f5;color:#4f5b66>&amp;</span><span style=background-color:#eff1f5;color:#4f5b66>T</span><span style=background-color:#eff1f5;color:#4f5b66>&gt;</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>}</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#b48ead>impl</span><span style=background-color:#eff1f5;color:#4f5b66>&lt;</span><span style=background-color:#eff1f5;color:#4f5b66>T</span><span style=background-color:#eff1f5;color:#4f5b66>&gt;</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>Choose</span><span style=background-color:#eff1f5;color:#4f5b66>&lt;</span><span style=background-color:#eff1f5;color:#4f5b66>T</span><span style=background-color:#eff1f5;color:#4f5b66>&gt;</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#b48ead>for</span><span style=background-color:#eff1f5;color:#4f5b66> [</span><span style=background-color:#eff1f5;color:#4f5b66>T</span><span style=background-color:#eff1f5;color:#4f5b66>] </span><span style=background-color:#eff1f5;color:#4f5b66>{</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#b48ead>fn</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#8fa1b3>choose</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>&amp;</span><span style=background-color:#eff1f5;color:#bf616a>self</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>-&gt;</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>Option</span><span style=background-color:#eff1f5;color:#4f5b66>&lt;</span><span style=background-color:#eff1f5;color:#4f5b66>&amp;</span><span style=background-color:#eff1f5;color:#4f5b66>T</span><span style=background-color:#eff1f5;color:#4f5b66>&gt;</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>{</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>        </span><span style=background-color:#eff1f5;color:#b48ead>let</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#b48ead>mut</span><span style=background-color:#eff1f5;color:#4f5b66> rng </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#96b5b4>thread_rng</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>        </span><span style=background-color:#eff1f5;color:#4f5b66>rng.</span><span style=background-color:#eff1f5;color:#96b5b4>choose</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>&amp;</span><span style=background-color:#eff1f5;color:#bf616a>self</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#4f5b66>}</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>}</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p></a><p>This boilerplate could be put into a crate to make it reusable for others.
With that, we arrive at a solution that rivals Ruby's elegance.<p><a class=example href="https://play.rust-lang.org/?gist=a66785b44094bacb78fa8dd822bfeab5&version=stable"><div class="rust icon"></div><pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#4f5b66>[</span><span style=background-color:#eff1f5;color:#d08770>1</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>2</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>4</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>8</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>16</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>32</span><span style=background-color:#eff1f5;color:#4f5b66>]</span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#96b5b4>choose</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p></a><h3>Implicit returns and expressions</h3><p>Ruby methods automatically return the result of the last statement.<p><a class=example href=https://gist.github.com/LeandroTk/9ede60f0898979f8f74d2869ed014c0c#file-return_2-rb><div class="ruby icon"></div><pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#b48ead>def</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#8fa1b3>get_user_ids</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#bf616a>users</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>  </span><span style=background-color:#eff1f5;color:#4f5b66>users</span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#4f5b66>map</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>&amp;</span><span style=background-color:#eff1f5;color:#a3be8c>:</span><span style=background-color:#eff1f5;color:#a3be8c>id</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#b48ead>end</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p></a><p>Same for Rust. Note the missing semicolon.<p><a class=example href="https://play.rust-lang.org/?gist=c7130debb2f712269380bd04819069ff&version=stable"><div class="rust icon"></div><pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#b48ead>fn</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#8fa1b3>get_user_ids</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#bf616a>users</span><span style=background-color:#eff1f5;color:#4f5b66>:</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&amp;</span><span style=background-color:#eff1f5;color:#4f5b66>[User]</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>-&gt;</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>Vec</span><span style=background-color:#eff1f5;color:#4f5b66>&lt;</span><span style=background-color:#eff1f5;color:#b48ead>u64</span><span style=background-color:#eff1f5;color:#4f5b66>&gt;</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>{</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#4f5b66>users.</span><span style=background-color:#eff1f5;color:#96b5b4>iter</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#96b5b4>map</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>|</span><span style=background-color:#eff1f5;color:#bf616a>user</span><span style=background-color:#eff1f5;color:#4f5b66>|</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>user.id</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#96b5b4>collect</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>}</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p></a><p>But in Rust, this is just the beginning, because <em>everything</em> is an expression.
The following block splits a string into characters, removes the <code>h</code>, and returns the result as a <code>HashSet</code>.
This <code>HashSet</code> will be assigned to <code>x</code>.<p><a class=example href="https://play.rust-lang.org/?gist=9ad54a58d3e5f1c06e795b5f7dca451e&version=stable"><div class="rust icon"></div><pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#b48ead>let</span><span style=background-color:#eff1f5;color:#4f5b66> x</span><span style=background-color:#eff1f5;color:#4f5b66>:</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>HashSet</span><span style=background-color:#eff1f5;color:#4f5b66>&lt;</span><span style=background-color:#eff1f5;color:#4f5b66>_</span><span style=background-color:#eff1f5;color:#4f5b66>&gt;</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>{</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#a7adba>//</span><span style=background-color:#eff1f5;color:#a7adba> Get unique chars of a word {&#39;h&#39;, &#39;e&#39;, &#39;l&#39;, &#39;o&#39;}
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#b48ead>let</span><span style=background-color:#eff1f5;color:#4f5b66> unique </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>hello</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#96b5b4>chars</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#a7adba>//</span><span style=background-color:#eff1f5;color:#a7adba> filter out the &#39;h&#39;
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#4f5b66>unique.</span><span style=background-color:#eff1f5;color:#96b5b4>filter</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>|</span><span style=background-color:#eff1f5;color:#4f5b66>&amp;</span><span style=background-color:#eff1f5;color:#bf616a>char</span><span style=background-color:#eff1f5;color:#4f5b66>|</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#b48ead>char</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>!</span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&#39;</span><span style=background-color:#eff1f5;color:#a3be8c>h</span><span style=background-color:#eff1f5;color:#4f5b66>&#39;</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#96b5b4>collect</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>}</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p></a><p>Same works for conditions:<p><a class=example href="https://play.rust-lang.org/?gist=cec96176079e8812ff62ad84a432ac9d&version=stable"><div class="rust icon"></div><pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#b48ead>let</span><span style=background-color:#eff1f5;color:#4f5b66> x </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#b48ead>if</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>1</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&gt;</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>0</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>{</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>absolutely!</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>}</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#b48ead>else</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>{</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>no seriously</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>}</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p></a><p>Since a <a target=_blank rel=noopener href=https://doc.rust-lang.org/1.2.0/book/match.html><code>match</code></a> statement is also an expression, you can assign the result to a variable, too!<p><a class=example href="https://play.rust-lang.org/?gist=a6b32fae6257787432cf607f5772693e&version=stable"><div class="rust icon"></div><pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#b48ead>enum</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>Unit</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>{</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#4f5b66>Meter</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#4f5b66>Yard</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#4f5b66>Angstroem</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#4f5b66>Lightyear</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>}</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#b48ead>let</span><span style=background-color:#eff1f5;color:#4f5b66> length_in_meters </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#b48ead>match</span><span style=background-color:#eff1f5;color:#4f5b66> unit </span><span style=background-color:#eff1f5;color:#4f5b66>{</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#4f5b66>Unit::</span><span style=background-color:#eff1f5;color:#4f5b66>Meter </span><span style=background-color:#eff1f5;color:#4f5b66>=&gt;</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>1.</span><span style=background-color:#eff1f5;color:#d08770>0</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#4f5b66>Unit::</span><span style=background-color:#eff1f5;color:#4f5b66>Yard </span><span style=background-color:#eff1f5;color:#4f5b66>=&gt;</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>0.</span><span style=background-color:#eff1f5;color:#d08770>91</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#4f5b66>Unit::</span><span style=background-color:#eff1f5;color:#4f5b66>Angstroem </span><span style=background-color:#eff1f5;color:#4f5b66>=&gt;</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>0.</span><span style=background-color:#eff1f5;color:#d08770>0000000001</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#4f5b66>Unit::</span><span style=background-color:#eff1f5;color:#4f5b66>Lightyear </span><span style=background-color:#eff1f5;color:#4f5b66>=&gt;</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>9.</span><span style=background-color:#eff1f5;color:#d08770>461e+15</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>}</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p></a><h3>Multiple Assignments</h3><p>In Ruby you can assign multiple values to variables in one step:<p><a class=example href=https://gist.github.com/LeandroTk/998bed8f8c20e487a1b8a638dd7563a1#file-multiple_assignment_1-rb><div class="ruby icon"></div><pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#b48ead>def</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#8fa1b3>values</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>  </span><span style=background-color:#eff1f5;color:#4f5b66>[</span><span style=background-color:#eff1f5;color:#d08770>1</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>2</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>3</span><span style=background-color:#eff1f5;color:#4f5b66>]</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#b48ead>end</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>one</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> two</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> three </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> values
</span></pre><p></a><p>In Rust, you can only decompose tuples into tuples, but not a vector into a tuple for example.
So this will work:<p><a class=example href="https://play.rust-lang.org/?gist=11b02c318ec35456b8247c3161cb341b&version=nightly"><div class="rust icon"></div><pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#b48ead>let</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>one</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> two</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> three</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#d08770>1</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>2</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>3</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p></a><p>But this won't:<p><a class=example href="https://play.rust-lang.org/?gist=11b02c318ec35456b8247c3161cb341b&version=nightly"><div class="rust icon"></div><pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#b48ead>let</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>one</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> two</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> three</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>[</span><span style=background-color:#eff1f5;color:#d08770>1</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>2</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>3</span><span style=background-color:#eff1f5;color:#4f5b66>]</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#a7adba>//</span><span style=background-color:#eff1f5;color:#a7adba>    ^^^^^^^^^^^^^^^^^ expected array of 3 elements, found tuple
</span></pre><p></a><p>Neither will this:<p><a class=example href="https://play.rust-lang.org/?gist=11b02c318ec35456b8247c3161cb341b&version=nightly"><div class="rust icon"></div><pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#b48ead>let</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>one</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> two</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> three</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>[</span><span style=background-color:#eff1f5;color:#d08770>1</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>2</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>3</span><span style=background-color:#eff1f5;color:#4f5b66>]</span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#96b5b4>iter</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#96b5b4>collect</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#a7adba>//</span><span style=background-color:#eff1f5;color:#a7adba> a collection of type `(_, _, _)` cannot be built from an iterator over elements of type `&amp;{integer}`
</span></pre><p></a><p>But with nightly Rust, you can now do this:<p><a class=example href="https://play.rust-lang.org/?gist=11b02c318ec35456b8247c3161cb341b&version=nightly"><div class="rust icon"></div><pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#b48ead>let</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>[</span><span style=background-color:#eff1f5;color:#4f5b66>one</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> two</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> three</span><span style=background-color:#eff1f5;color:#4f5b66>]</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>[</span><span style=background-color:#eff1f5;color:#d08770>1</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>2</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>3</span><span style=background-color:#eff1f5;color:#4f5b66>]</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p></a><p>On the other hand, there's <a target=_blank rel=noopener href=https://doc.rust-lang.org/book/second-edition/ch18-03-pattern-syntax.html>a lot more you can do with destructuring</a> apart from multiple assignments. You can write beautiful, ergonomic code using pattern syntax.<p><a class=example href="https://play.rust-lang.org/?gist=969612861bc6028e3b98345e21a4289e&version=stable"><div class="rust icon"></div><pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#b48ead>let</span><span style=background-color:#eff1f5;color:#4f5b66> x </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>4</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#b48ead>let</span><span style=background-color:#eff1f5;color:#4f5b66> y </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>false</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#b48ead>match</span><span style=background-color:#eff1f5;color:#4f5b66> x </span><span style=background-color:#eff1f5;color:#4f5b66>{</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#d08770>4</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>|</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>5</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>|</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>6</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#b48ead>if</span><span style=background-color:#eff1f5;color:#4f5b66> y </span><span style=background-color:#eff1f5;color:#4f5b66>=&gt;</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>println!</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>yes</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#4f5b66>_</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>=&gt;</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>println!</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>no</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>}</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p></a><p>To quote <em><a target=_blank rel=noopener href=https://doc.rust-lang.org/book/second-edition/ch18-03-pattern-syntax.html>The Book</a></em>:<blockquote><p>This prints <code>no</code> since the if condition applies to the whole pattern <code>4 | 5 | 6</code>, not only to the last value 6.</blockquote><h3>String interpolation</h3><p>Ruby has <a target=_blank rel=noopener href=http://www.rubyguides.com/2012/01/ruby-string-formatting/>extensive string interpolation support</a>.<p><a class=example href=https://gist.github.com/LeandroTk/5125cab5e74d26460124c786ac5df534#file-interpolation-rb><div class="ruby icon"></div><pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#4f5b66>programming_language </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>Ruby</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#ab7967>#{</span><span style=background-color:#eff1f5;color:#a3be8c>programming_language</span><span style=background-color:#eff1f5;color:#ab7967>}</span><span style=background-color:#eff1f5;color:#a3be8c> is a beautiful programming language</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p></a><p>This can be translated like so:<p><a class=example href="https://play.rust-lang.org/?gist=6920e723137e44c4befe3398721fafa1&version=stable"><div class="rust icon"></div><pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#b48ead>let</span><span style=background-color:#eff1f5;color:#4f5b66> programming_language </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>Rust</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>format!</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#d08770>{}</span><span style=background-color:#eff1f5;color:#a3be8c> is also a beautiful programming language</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> programming_language</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p></a><p>Named arguments are also possible, albeit much less common:<p><a class=example href="https://play.rust-lang.org/?gist=6920e723137e44c4befe3398721fafa1&version=stable"><div class="rust icon"></div><pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#4f5b66>println!</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#d08770>{language}</span><span style=background-color:#eff1f5;color:#a3be8c> is also a beautiful programming language</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> language</span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>Rust</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p></a><p>Rust's <code>println!()</code> syntax is even more extensive than Ruby's. <a target=_blank rel=noopener href=https://doc.rust-lang.org/std/fmt/>Check the docs</a> if you're curious about what else you can do.<h3>That’s it!</h3><p>Ruby comes with syntactic sugar for many common usage patterns, which allows for very elegant code.
Low-level programming and raw performance are no primary goals of the language.<p>If you do need that, Rust might be a good fit, because it provides fine-grained hardware control with comparable ergonomics.
If in doubt, Rust favors explicitness, though; it eschews magic.<p>Did I whet your appetite for idiomatic Rust? Have a look at <a target=_blank rel=noopener href=https://github.com/mre/idiomatic-rust>this Github project</a>. I'd be thankful for contributions.<h3>Footnotes</h3><p><sup id=fn1>1. Thanks to <a target=_blank rel=noopener href=https://twitter.com/Argorak>Florian Gilcher</a> for the hint.<a href=#ref1 title="Jump back to footnote 1 in the text.">↩</a></sup><br><sup id=fn2>2. Thanks to <a target=_blank rel=noopener href=https://www.reddit.com/user/masklinn>masklin</a> for pointing out multiple inaccuracies.<a href=#ref2 title="Jump back to footnote 2 in the text.">↩</a></sup><br><sup id=fn3>3. In the first version, I sait that <code>ok()</code> would convert a <code>Result</code> into a <code>boolean</code>, which was wrong. Thanks to <a target=_blank rel=noopener href="https://news.ycombinator.com/item?id=16003080">isaacg</a> for the correction.<a href=#ref3 title="Jump back to footnote 3 in the text.">↩</a></sup><ul class=links><li>💬 Comments available on
<a target=_blank rel=noopener href=https://www.reddit.com/r/programming/comments/7kefgh/rust_for_rubyists/>Reddit</a>
and
<a target=_blank rel=noopener href="https://news.ycombinator.com/item?id=15986838#16003994">Hacker News</a>.</ul></main><footer><form style="border:1px solid #ccc;padding:30px;text-align:center" action=https://tinyletter.com/mre method=post target=popupwindow onsubmit="window.open('https://tinyletter.com/mre','popupwindow','scrollbars=yes,width=800,height=600');return true"><p><label for=tlemail>Subscribe to newsletter <i style=color:#aaa>(one mail per month)</i></label><p><input class="field email" type=email name=email id=tlemail placeholder="E-Mail Address">
<input type=hidden value=1 name=embed><input class="field submit" type=submit value=Subscribe><p>💡 I also <a target=_blank rel=noopener href=https://twitter.com/matthiasendler>tweet</a> new articles and have an <a target=_blank rel=noopener href=https://feedly.com/i/subscription/feed/https://matthias-endler.de/rss.xml>RSS feed</a>.</form><h3>Continue reading</h3><ul><li><a href=/2018/cargo-inspect>cargo-inspect</a><li><a href=/2018/excel>The Unreasonable Effectiveness of Excel Macros</a><li><a href=/2018/keyboard>Switching from a German to a US Keyboard Layout - Is It Worth It?</a><li><a href=/2018/fastcat>fastcat - A Faster `cat` Implementation Using Splice</a><li><a href=/2018/github>That Octocat on the Wall</a></ul></footer><script>if(location.hostname!=="localhost"&&location.hostname!=="127.0.0.1"){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-693428-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script>